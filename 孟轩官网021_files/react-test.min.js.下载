function rndNum(n,t){return(n+Math.random()*(t-n)).toFixed(2)}function reactionClick(){if(state===0)reactStart();else if(state===1)reactFalse();else if(state===2)reactResult();else if(state===3)return}function reactStart(){$("#reaction").css("background-color","#3291ba");state=1;setMeasure();$("#reaction-text").html(textWait)}function setMeasure(){reactionTimeout=setTimeout(reactMeasure,rndNum(1,5)*1e3)}function stopMeasure(){clearTimeout(reactionTimeout)}function reactMeasure(){timeStamp=Date.now();state=2;$("#reaction").css("background-color","#08c534");$("#reaction-text").html(textClick)}function reactFalse(){$("#reaction").css("background-color","#e6304a");$("#reaction-text").html(textFalse);stopMeasure();state=3;setTimeout(function(){state=0},500)}function reactResult(){var n=Date.now()-timeStamp;$("#reaction-text").html(textResult);$("#reaction-time").html(n);config_react_test.record||(config_react_test.record=[]);config_react_test.record.push(n);showResult();saveConfig();state=3;setTimeout(function(){state=0},500)}function showResult(){var i,r,t,n;if(config_react_test.record&&config_react_test.record.length>0){for($("#divResult").show(),i=0,r=0,n=0;n<config_react_test.record.length;n++)r+=config_react_test.record[n];for(i=Math.round(r/config_react_test.record.length),t="",t+='<div class="mb-3">',t+='   <button type="button" class="btn btn-outline-primary" onclick="resetConfig()">'+getTextByLanguage("清空测试结果")+"<\/button>",t+="<\/div>",t+='<div class="text border p-2">',t+="   <div>"+getTextByLanguage("测试次数：")+'<span class="red">'+config_react_test.record.length.toString()+"<\/span>"+getTextByLanguage("，")+"&nbsp;&nbsp;"+getTextByLanguage("平均时间：")+'<span class="red">'+i.toString()+"<\/span> ms<\/div>",n=0;n<config_react_test.record.length;n++)t+="   <div>"+(n+1).toString()+"&nbsp;"+getTextByLanguage("次：")+config_react_test.record[n].toString()+" ms<\/div>";t+="<\/div>";$("#result").html(t)}else $("#divResult").hide()}function saveConfig(){ys.setConfig(nameOf(()=>config_react_test),JSON.stringify(config_react_test));var n=formHeight-ys.getElementActualHeight("divUp")-ys.getElementActualHeight("divRemark")-adHeight;adjustFormHeightWithParameter(n,"divResult")}function resetConfig(){config_react_test.record=[];ys.removeConfig(nameOf(()=>config_react_test));$("#divResult").hide()}var config_react_test={record:[]},textStart,textWait,textClick,textResult,textFalse,state=0,timeStamp,reactionTimeout;window.pageLoad=function(){config_react_test=ys.loadConfig("form",nameOf(()=>config_react_test));textStart='<p class="r-main">'+getTextByLanguage("点击！")+"<\/p><p>"+getTextByLanguage("开始测量你的反应时间")+"<\/p>";textWait='<p class="r-main">'+getTextByLanguage("等待")+"<\/p> <p>"+getTextByLanguage("屏幕变绿后点击")+"<\/p>";textClick='<p class="r-main">'+getTextByLanguage("点击！")+"<\/p>";textResult='<p class="r-main">'+getTextByLanguage("你的反应时间是")+' <span id="reaction-time"><\/span> ms<\/p><p>'+getTextByLanguage("点击重新开始")+"<\/p>";textFalse='<p class="r-main">'+getTextByLanguage("你点击得太早了！")+"<\/p> <p>"+getTextByLanguage("点击重新开始")+"<\/p>";$("#reaction-text").html(textStart);showResult();$("#reaction").click(function(){reactionClick()});document.body.onkeydown=function(n){var t=window.event||n;t.keyCode==32&&(reactionClick(),t.preventDefault?t.preventDefault():window.event.returnValue=!1)}};